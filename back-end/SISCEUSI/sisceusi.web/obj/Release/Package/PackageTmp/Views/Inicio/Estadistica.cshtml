@using sisceusi.entidad
@{
    ViewBag.Title = "Estadistica";
    List<ControlEncuestaBE> listaControlEncuesta = ViewData["listaControlEncuesta"] == null ? new List<ControlEncuestaBE>() : (List<ControlEncuestaBE>)ViewData["listaControlEncuesta"];
    List<IndicadorBE> listaIndicador = ViewData["listaIndicador"] == null ? new List<IndicadorBE>() : (List<IndicadorBE>)ViewData["listaIndicador"];
    int idSubSector = ViewData["idSubSector"] == null ? 0 : (int)ViewData["idSubSector"];
    int idPlanta = ViewData["idPlanta"] == null ? 0 : (int)ViewData["idPlanta"];
    List<ParametroBE> opcionesSubSector = Session["opcionesSubSector"] == null ? new List<ParametroBE>() : (List<ParametroBE>)Session["opcionesSubSector"];
    ParametroBE subSector = opcionesSubSector.Find(x => x.idParametro == idSubSector);
    string nombreSubSector = subSector != null ? subSector.parametro : "";
}

@section scripts_header{
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
          google.charts.load('current', {'packages':['corechart']});

          //google.charts.setOnLoadCallback(drawPieChart);
          //function drawPieChart() {
          //  var data = new google.visualization.DataTable();
          //  data.addColumn('string', 'Nombre');
          //  data.addColumn('number', 'Valor');
          //  data.addRows([
          //    ['Valor 01', 3],
          //    ['Valor 02', 1],
          //    ['Valor 03', 2],
          //    ['Valor 04', 1]
          //  ]);
          //  var options = {
          //    // title:'TOTAL ENERGÍA COMPRADA',
          //    backgroundColor: '#f8f9fa',
          //    legend: {position: 'bottom'},
          //    // 'width':400,
          //    // 'height':300
          //    };
          //  var chart = new google.visualization.PieChart(document.getElementById('pie-chart'));
          //  chart.draw(data, options);
          //}

          google.charts.load('current', {
          'packages': ['map'],
          'mapsApiKey': 'AIzaSyAvbAXGXWAba7Djr1Uh4Vj_GnA62z7gp9U'
          });
          //google.charts.setOnLoadCallback(drawMap);

          //function drawMap() {
          //    var data = google.visualization.arrayToDataTable([              
          //    ['Latitud', 'Longitud', 'Nombre', 'Marker'],
          //    [-9.189967, -75.015152, 'UBICACIÓN NÚMERO 01', 'blue'],
          //    [-6.459052, -77.927939, 'UBICACIÓN NÚMERO 02', 'green'],
          //    [-12.352521, -72.211233, 'UBICACIÓN NÚMERO 03', 'pink'],
          //    [-11.965887, -76.081003, 'UBICACIÓN NÚMERO 04', 'green']
          //  ]);
          //  var url = 'https://icons.iconarchive.com/icons/icons-land/vista-map-markers/48/';
          //  var options = {
          //    mapType: 'styledMap',
          //    zoomLevel: 5,
          //    showTooltip: true,
          //    showInfoWindow: true,
          //    useMapTypeControl: false,
          //    icons: {
          //      blue: {
          //        normal:   url + 'Map-Marker-Ball-Azure-icon.png',
          //        selected: url + 'Map-Marker-Ball-Right-Azure-icon.png'
          //      },
          //      green: {
          //        normal:   url + 'Map-Marker-Push-Pin-1-Chartreuse-icon.png',
          //        selected: url + 'Map-Marker-Push-Pin-1-Right-Chartreuse-icon.png'
          //      },
          //      pink: {
          //        normal:   url + 'Map-Marker-Ball-Pink-icon.png',
          //        selected: url + 'Map-Marker-Ball-Right-Pink-icon.png'
          //      }
          //    },
          //    maps: {
          //      // Your custom mapTypeId holding custom map styles.
          //      styledMap: {
          //        name: 'Styled Map', // This name will be displayed in the map type control.
          //        styles: [
          //          {featureType: 'poi.attraction', stylers: [{color: '#fce8b2'}]},
          //          {featureType: 'road.highway',stylers: [{hue: '#0277bd'}, {saturation: -50}]},
          //          {featureType: 'road.highway',elementType: 'labels.icon',stylers: [{hue: '#000'}, {saturation: 100}, {lightness: 50}]},
          //          {featureType: 'landscape',stylers: [{hue: '#259b24'}, {saturation: 10}, {lightness: -22}]}
          //    ]}}
          //  };
          //  var map = new google.visualization.Map(document.getElementById('chart_div'));
          //  map.draw(data, options);
          //};

          google.charts.setOnLoadCallback(drawDonutChart);
          function drawDonutChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Topping');
            data.addColumn('number', 'Slices');
            data.addRows([
              ['Valor 01', 3],
              ['Valor 02', 1],
              ['Valor 03', 2],
              ['Valor 04', 1]
            ]);
            var options = {
              // title:'SEGMENTO POR PREGUNTA',
              backgroundColor: '#f8f9fa',
              legend: {position: 'bottom'},
              pieHole: 0.5,
              pieSliceTextStyle: {
                color: 'black',
              },
              // 'width':400,
              // 'height':300
              };
            var chart = new google.visualization.PieChart(document.getElementById('donut-chart'));
            chart.draw(data, options);
          }
    </script>
}

@section scripts_footer {
    <script src="@Url.Content("~/Scripts/Sisceusi/inicio_estadistica.js")"></script>
}

<div class="container-fluid map-root" id="historia"></div>
<div class="container my-4" id="cuerpo">
    <div class="row">
        <div class="col-12">
            <div class="container m-0 px-0 py-4">
                <div class="row">
                    <div class="col-md-12 col-lg-9 d-flex">
                        <div class="bg-light py-4 pl-0 w-100">
                            <div class="h3 text-cyan">ESTADÍSTICAS DEL SUB SECTOR <strong>@nombreSubSector.ToUpper()</strong>&nbsp;</div>
                            @*<p class="m-0 text-muted">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quaerat nostrum exercitationem, accusantium id fugit perspiciatis laboriosam, aliquam ut vero architecto cumque, placeat voluptas suscipit? Illo iusto soluta molestias fugit dolorum!</p>*@
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-3">
                        <div class="row">
                            <div class="col-12">
                                <a class="btn btn-plomo w-100 mb-1" href="@Url.Action("Reporte", "Inicio", new { id = idSubSector })">Regresar</a>
                                <button class="btn btn-warning w-100 mb-1 text-white" data-toggle="tooltip" data-placement="left" title="Lorem ipsum dolor sit amet consectetur adipisicing elit. Quidem ipsum voluptate, repudiandae aperiam ducimus eaque cum? Ipsum, similique quae excepturi at quisquam obcaecati modi nulla debitis corrupti minima eum iusto!"><i class="fas fa-question-circle pr-1"></i>Ayuda</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dropdown-divider mb-4"></div>
                <div class="row">
                    <div class="col-12">
                        <strong class="text-cyan">RESUMEN DE RESULTADOS</strong>
                        <div class="dropdown-divider"></div>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col-xm-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="font-weight-bold" for="cbo-departamento">DEPARTAMENTO</label>
                            <select class="form-control" id="cbo-departamento">
                                <option value="0">-Seleccione un departamento-</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-xm-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="font-weight-bold" for="cbo-provincia">PROVINCIA</label>
                            <select class="form-control" id="cbo-provincia">
                                <option value="0">-Seleccione una provincia-</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-xm-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="font-weight-bold" for="cbo-distrito">DISTRITO</label>
                            <select class="form-control" id="cbo-distrito">
                                <option value="0">-Seleccione un distrito-</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="seccion-indicadores" class="row mb-4">
                    <div class="col-xm-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="table-responsive tabla-principal">
                            <table id="tbl-indicador" class="table table-striped table-hover">
                                <thead>
                                    <tr class="bg-azul text-white">
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>INDICADORES</span></span></div>
                                        </th>
                                        <th scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>SELEC.</span></span></div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td data-encabezado="INDICADORES" scope="row">
                                            <i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i>Consumo de energía final (CF) y útil (CU) por subsector industrial &nbsp;1
                                        </td>
                                        <td class="text-center" data-encabezado="Seleccionar">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="radio-tabla">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td data-encabezado="INDICADORES" scope="row">
                                            <i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i>Consumo de energía final (CF) y útil (CU) por subsector industrial &nbsp;2
                                        </td>
                                        <td class="text-center" data-encabezado="Seleccionar">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="radio-tabla">
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-xm-12 col-sm-12 col-md-4 col-lg-4">
                        <strong id="titulo-grafico" class="title-chart"></strong>
                        <div class="logros chart" id="pie-chart"></div>
                    </div>
                    <div class="col-xm-12 col-sm-12 col-md-4 col-lg-4">
                        <strong class="title-chart"></strong>
                        <div class="map-chart" id="chart_div"></div>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col-xm-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="table-responsive tabla-principal">
                            <table id="tbl-planta" class="table table-striped table-hover">
                                <thead>
                                    <tr class="bg-azul text-white">
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>N° CUESTIONARIO</span></span></div>
                                        </th>
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>EMPRESA</span></span></div>
                                        </th>
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>PLANTA</span></span></div>
                                        </th>
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>DEPARTAMENTO</span></span></div>
                                        </th>
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>PROVINCIA</span></span></div>
                                        </th>
                                        <th class="text-center" scope="col">
                                            <div class="d-flex justify-content-between align-items-center"><span class="d-flex justify-content-between align-items-center"><i class="fas fa-question-circle mr-1" data-toggle="tooltip" data-placement="right" title="Título de ayuda"></i><span>DISTRITO</span></span></div>
                                        </th>
                                        <th class="text-center" scope="col">GESTIÓN</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td class="text-left pl-0" colspan="3"><span>Resultado:&nbsp;</span><span class="inicio-registros">1</span><span id="view-page-result">-<span class="fin-registros">1</span> de <span class="total-registros">1</span> registros</span></td>
                                        <td id="viewPagination" class="text-right text-xs-left pr-0" colspan="5" style="display: none">
                                            <span>Registros por página&nbsp;</span>
                                            <select id="number-registers">
                                                <option value="10" selected>10</option>
                                                <option value="25">25</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                            </select>&nbsp;
                                            <span class="pagina">1</span> de <span class="total-paginas">75</span> páginas&nbsp;
                                            <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
                                                <button class="btn btn-success" type="button" onclick="cambiarPagina(1)"><i class="fas fa-angle-double-left"></i></button>
                                                <button class="btn btn-success" type="button" onclick="cambiarPagina(2)"><i class="fas fa-angle-left"></i></button>
                                                <input class="ir-pagina" type="number" value="1" min="1">
                                                <button class="btn btn-success" type="button" onclick="cambiarPagina(3)"><i class="fas fa-angle-right"></i></button>
                                                <button class="btn btn-success" type="button" onclick="cambiarPagina(4)"><i class="fas fa-angle-double-right"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tfoot> 
                            </table>
                        </div>
                    </div>
                    @*<div class="col-xm-12 col-sm-12 col-md-6 col-lg-6">
                        <strong class="title-chart">SEGMENTO POR PREGUNTA</strong>
                        <div class="logros chart" id="donut-chart"></div>
                    </div>*@
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var listaControlEncuesta = @Html.Raw(Json.Encode(listaControlEncuesta));
    var listaIndicador = @Html.Raw(Json.Encode(listaIndicador));
    var idPlanta = @idPlanta;
</script>

